<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="positioning.css" type="text/css">
    <link rel="stylesheet" href="styling.css" type="text/css">
    <link rel="stylesheet" href="code.css" type="text/css">
    <link rel="stylesheet" href="animation.css" type="text/css">
    <link rel="stylesheet" href="test.css" type="text/css">
    <title>초록무의 코딩연습 - ros2 명령어</title>
</head>
<body>
    <div id="top">
        <div id="title"><h3>Chorokmoo</h3></div>
        <div id="nav_things">
            <h4>목록</h4>
            <h4>검색(*개발중)</h4>
        </div>
    </div>
    <div id="center">
        <div id="info">
            <div id="info_card">
                <div>
                    <h5>김건아</h5>
                    <h6>SCH univ. Student</h6>
                    <br>
                </div>
                <div>
                    <p><code>Python</code></p>
                    <p><code>HTML5</code>, <code>CSS3</code></p>
                    <p><code>C</code></p>
                    <p><code>JAVA</code></p>
                </div>
            </div>
        </div>
        <div id="center_m">
            <div id="main">
                <header class="section">
                    <h1>ROS2</h1>
                    <p><code>ROS</code>를 사용하기전 우리는 터미널로 값을 미리 설정해줘야 하는 것 들이 있습니다.</p>
                    <p>예로들면 같은 네트워크안 연구실 사람들하고 통신이 겹치지 않게 도메인 값을 설정한다든지, <code>RMW(ROS MIDDLE WARE)</code>를 무엇으로 사용 할 것 인지 등등 우리는 이것을 <code>.bashrc</code>로 만들어서 터미널 실행전에 자동으로 셋팅이 되도록 하려고 합니다.</p>
                    <p>단순히 <code>.bashrc</code>라는 파일을 만들어서 터미널이 실행될 때 마다 값이 자동으로 셋팅이 되도록 설정할 수 있습니다.</p>
                    <p><code>.bashrc</code>에 대한 자세한 설명은 -> <blockquote>참고 <a href="https://dohk.tistory.com/191" target="_blank">쉘의 개념, bashrc의 개념</a></blockquote></p>
                </header>
                <div id="section_1" class="section">
                    <h2>터미널 변수 - RMW(ROS MIDDLE WARE)</h2>
                    <hr>
                    <p><code>RMW</code>는 환경변수에 정의되어 있습니다. <code>RMW</code>를 변경할땐,</p>
                    <pre><code class="hljs" style="background:#151718;border-radius:8px">$ <span class="hljs-built_in">export</span> RMW_IMPLEMANTATION=rmw_fastrtps_cpp</code></pre>
                    <p>와 같이 뒤에 사용할 <code>RMW</code>종류를 적어주면서 변경 할 수 있습니다. 변경시 현재 터미널에서만 적용이 됩니다.</p>
                    <p>기본값으로 <code>rmw_fastrtps_cpp</code>가 있고, <code>rmw_connext_cpp</code> <code>rmw_cyclonedds_cpp</code> <code>rmw_gurumdds_cpp</code> <code>rmw_opensplice_cpp</code>가 있습니다.</p>
                    <blockquote>참고 <a href="https://cafe.naver.com/openrt/24031" target="_blank">006 ROS 2와 DDS (Data Distribution Service) 5.2 RMW 변경 방법</a></blockquote>
                </div>
                <div id="section_2" class="section">
                    <h2>터미널 변수 - DOMAIN</h2>
                    <hr>
                    <p>같은 네트워크일 경우, 도메인이 같으면 같은 네트워크상 다른 노드의 데이터에 접근이 가능합니다. 이는 실수로 다른사람의 노드를 조정할 수 있다는 말 입니다. 이를 방지하기 위해선 환경변수에서 <code>ROS</code>의 도메인 값을 바꿔줘야 합니다.</p>
                    <pre><code class="hljs" style="background:#151718;border-radius:8px">$ <span class="hljs-built_in">export</span> ROS_DOMAIN_ID=7</code></pre>
                    <p>값으로 <code>7</code> 대신 <code>0~232</code>사이의 값이 올 수 있습니다. 터미널의 <code>ROS_DOMAIN_ID</code>값이 같은 터미널끼리 통신을 합니다. 변경시 현재 터미널에서만 적용이 됩니다.</p>
                    <blockquote>참고 <a href="https://cafe.naver.com/openrt/24031" target="_blank">006 ROS 2와 DDS (Data Distribution Service) 5.4 Domain 변경 방법</a></blockquote>
                </div>
                <div id="section_3" class="section">
                    <h2>명령어 - run</h2>
                    <hr>
                    <p><code>run</code>은 노드를 실행(생성)할 때 사용하는 명령어 입니다. <code>ros2</code>에서는 따로 마스터 노드를 생성하지 않고, 바로 <code>run</code>명령어를 사용하여 노드를 실행(생성)할 수 있습니다.</p>
                    <pre><code class="hljs" style="background:#151718;border-radius:8px">$ ros2 run [패키지 이름] [실행할 파일 이름] [옵션]</code></pre>
                    <p><code>[패키지 이름]</code>에는 turtlesim과 같은 패키지를 적어주면 됩니다.</p>
                    <p><code>[실행할 파일 이름]</code>에는 turtlesim_node와 같은 실행가능한 파일 이름을 적어주면 됩니다.</p>
                    <p><code>[옵션]</code>에는 옵션키 -h, --prefix 가 있습니다. <code>[옵션]</code> 값은 안적어줘도 됩니다.</p>
                    <blockquote>패키지이름이나 명령어들은<code>TAB</code>키를 한번 눌러 자동완성 시킬 수 있습니다.</blockquote>
                    <blockquote><code>TAB</code>키를 두번 연속으로 누르면, 사용(실행)가능한 명령어와 패키지들을 볼 수 있습니다.</blockquote>
                    <blockquote>실행중인 노드를 종료할때는 터미널 창에서 <code>ctrl + c</code>로 종료할 수 있습니다.</blockquote>
                    <pre><code class="hljs" style="background:#151718;border-radius:8px">$ ros2 run [패키지 이름] [실행할 파일 이름] [옵션] --ros-args -r __node:=[새로운 노드 이름]</code></pre>
                    <p>노드를 생성할때 이름을 바꿔서 생성하려면 위와같이 <code>--ros-args -r __node:=[새로운 노드 이름]</code>을 작성해줘야한다.</p>
                    <blockquote>참고 <a href="https://docs.ros.org/en/foxy/How-To-Guides/Node-arguments.html">Passing ROS arguments to nodes via the command-line</a></blockquote>
                </div>
                <div id="section_4" class="section">
                    <h2>명령어 - node</h2>
                    <hr>
                    <p><code>node</code>는 노드와 관련된 작업을 합니다.</p>
                    <pre><code class="hljs" style="background:#151718;border-radius:8px">$ ros2 node info [노드 이름]

$ ros2 node list</code></pre>
                    <p><code>node info</code>는 노드의 정보를 출력합니다.</p>
                    <p><code>node list</code>는 현재 실행중인 노드들을 출력합니다.</p>
                </div>
                <div id="section_5" class="section">
                    <h2>명령어 - pkg</h2>
                    <hr>
                    <p><code>pkg</code>는 패키지와 관련된 작업을 합니다.</p>
                    <pre><code class="hljs" style="background:#151718;border-radius:8px">$ ros2 pkg list

$ ros2 pkg excutables [패키지 이름]
                        
$ ros2 pkg create
                        
$ ros2 pkg prefix [패키지 이름]
                        
$ ros2 pkg xml [패키지 이름]</code></pre>
                    <p><code>pkg list</code>는 유효한 패키지 목록을 보여줍니다.</p>
                    <p><code>pkg excutables</code>는 패키지의 실행가능한 파일(노드) 까지 보여줍니다.</p>
                    <p><code>pkg create</code>는 패키지를 생성합니다.<mark>설명 나중에</mark></p>
                    <p><code>pkg prefix</code>는 패키지 경로를 출력해줍니다.</p>
                    <p><code>pkg xml</code>은 패키지 xml을 표시합니다.</p>
                </div>
                <div id="section_6" class="section">
                    <h2>명령어 - topic</h2>
                    <hr>
                    <p><code>topic</code>은 노드들 간 단방향 통신을 할 때 사용되는 방법입니다.</p>
                    <pre><code class="hljs" style="background:#151718;border-radius:8px">$ ros2 topic info [토픽 이름]

$ ros2 topic echo [토픽 이름]

$ ros2 topic bw [토픽 이름]

$ ros2 topic hz [토픽 이름]

$ ros2 topic delay [토픽 이름]

$ ros2 topic pub [옵션] [토픽 이름] [메시지 타입] [메시지 타입에 해당하는 값]
$ ros2 topic pub --once [토픽 이름] ··· 한 번만 발행
$ ros2 topic pub --rate [n] [토픽 이름] ··· 1초에 n번을 주기로 발행
$ ros2 topic pub --times [n] [토픽 이름] ··· n번 발행
···

$ ros2 topic type [토픽 이름]
$ ros2 topic find [토픽 메시지 타입]
$ ros2 topic list
</code></pre>
                    <p><code>topic info</code>는 토픽 메시지의 형태와 이 토픽의 publisher, subscriber 의 갯수를 보여줍니다.</p>
                    <p><code>topic echo</code>는 해당 토픽을 구독하여, 실시간으로 해당 토픽의 내용을 표시합니다.</p>
                    <p><code>topic bw</code>는 해당 토픽의 대역폭을 보여줍니다. (평균 데이터 전송량)</p>
                    <p><code>topic hx</code>는 해당 토픽의 주기를 나타냅니다. (1초에 몇번 데이터를 발행하는지)</p>
                    <p><code>topic delay</code>는 해당 토픽의 발행시간과 구독시간의 차를 이용해 딜레이 시간을 계산합니다.</p>
                    <p><code>topic pub</code>는 토픽을 발행합니다.</p>
                    <p><code>topic type</code>은 해당 토픽의 메시지 타입을 알려줍니다.</p>
                    <p><code>topic find</code>는 해당 메시지 타입을 가진 토픽을 찾습니다.</p>
                    <p><code>topic list</code>는 현재 사용가능한 토픽들을 보여줍니다</p>

                </div>
                <div id="section_7" class="section">
                    <h2>명령어 - bag</h2>
                    <hr>
                    <p><code>bag</code>은 <code>topic</code>을 기록하여 다시 사용 할 수 있게 도와줍니다.</p>
                    <pre><code class="hljs" style="background:#151718;border-radius:8px">$ ros2 bag record [토픽 이름] [토픽 이름] ···

$ ros2 bag info [rosbag 파일]

$ ros2 bag play [rosbag 파일]</code></pre>
                    <p><code>bag record</code>는 해당 토픽들을 시간의 흐름에 맞게 기록합니다. 기록종료는 <code>ctrl + c</code>로 할 수 있습니다. 이름을 다르게 저장하고 싶으면, <code>-o [이름]</code>옵션을 통해 추가해주면 됩니다.</p>
                    <p><code>bag info</code>는 저장된 rosbag 파일의 정보를 보여줍니다.</p>
                    <p><code>bag play</code>는 저장된 rosbag 파일을 실행합니다.</p>
                </div>
            </div>
            <div id="nav_list">
                <div class="section_nav">
                    <a href="#main">처음으로 </a>
                    <a href="#section_1">터미널 변수 - RMW</a>
                    <a href="#section_2">터미널 변수 - DOMAIN</a>
                    <a href="#section_3">명령어 -  run</a>
                    <a href="#section_4">명령어 -  node</a>
                    <a href="#section_5">명령어 -  pkg</a>
                    <a href="#section_6">명령어 - topic</a>
                    <a href="#section_7">명령어 - bag</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>